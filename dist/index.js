!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AppFrameworkSDK=e():t.AppFrameworkSDK=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getReferences=e.includeReference=e.includeSchema=e.includeContentType=e.includeOwner=e.environment=e.language=e.addQuery=e.addParam=e._type=e.mergeDeep=e.merge=e.transform=void 0,e.transform=function(t){return function(){switch(this._query[t]=this._query[t]||{},arguments.length){case 1:if(Array.isArray(arguments[0])||"string"==typeof arguments[0])return e=(e=this._query[t].BASE||[]).concat(arguments[0]),this._query[t].BASE=e,this;throw Error("Kindly provide valid parameters");case 2:var e;if("string"==typeof arguments[0]&&(Array.isArray(arguments[1])||"string"==typeof arguments[1]))return e=(e=this._query[t][arguments[0]]||[]).concat(arguments[1]),this._query[t][arguments[0]]=e,this;throw Error("Kindly provide valid parameters");default:throw Error("Kindly provide valid parameters")}}},e.merge=function(t,e){var n=t;return t&&e&&Object.keys(e).forEach((function(t){n[t]=e[t]})),n},e.mergeDeep=function(t,e){var n=t,r=this,i=function(t,e){var n=t;Object.keys(e).forEach((function(t){"object"===r._type(e[t])&&r._type(n[t])===r._type(e[t])?i(n[t],e[t]):"array"===r._type(e[t])&&r._type(n[t])===r._type(e[t])?n[t]=n[t].concat(e[t]):n[t]=e[t]}))};return i(n,e),n},e._type=function(t){var e=typeof t;return"object"===e&&Array.isArray(t)&&(e="array"),e},e.addParam=function(t,e){if(t&&"string"==typeof t&&e&&"string"==typeof e)return this._query[t]=e,this;throw Error("Kindly provide valid parameters.")},e.addQuery=function(t,e){if(t&&e&&"string"==typeof t)return this._query[t]=e,this;throw Error("First argument should be a String.")},e.language=function(t){if(t&&"string"==typeof t)return this._query.locale=t,this;throw Error("Argument should be a String.")},e.environment=function(t){if(t&&"string"==typeof t)return this._query.environment=t,this;throw Error("Argument should be a String.")},e.includeOwner=function(){return this._query.include_owner=!0,this},e.includeContentType=function(){return this._query.include_content_type=!0,this},e.includeSchema=function(){return this._query.include_schema=!0,this},e.includeReference=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e+=1)this._query["include[]"]=this._query["include[]"]||[],this._query["include[]"]=this._query["include[]"].concat(t[e]);else{if("string"!=typeof t)throw Error("Argument should be a String or an Array.");for(e=0;e<arguments.length;e+=1)this._query["include[]"]=this._query["include[]"]||[],this._query["include[]"]=this._query["include[]"].concat(arguments[e])}return this},e.getReferences=function(){return this.fetch("get"+this.constructor.module()+"References")}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(15)),o=n(0);function a(t){return"string"==typeof t.data?Promise.reject(t.data):Promise.resolve(t.data)}function u(t){return Promise.reject(t)}var s=function(){function t(t){if(!t)throw new Error("uid is required");this.uid=t,this._query={},this.only=o.transform("only"),this.except=o.transform("except"),this.addParam=o.addParam}return t.Query=function(){return new i.default(this.connection,this.module(!0),this.contentTypeUid)},t.create=function(t){var e={payload:t,content_type_uid:this.contentTypeUid,action:"create"+this.module()};return this.connection.sendToParent("stackQuery",e).then(a).catch(u)},t.prototype.update=function(t){return!t||"object"!=typeof t||t instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("update"+this.constructor.module(),t)},t.prototype.delete=function(){return this.fetch("delete"+this.constructor.module())},t.prototype.fetch=function(t,e){var n={payload:e,content_type_uid:this.constructor.contentTypeUid,uid:this.uid,params:this._query,action:t||"get"+this.constructor.module()};return e||delete n.payload,this.constructor.contentTypeUid||delete n.content_type_uid,this.constructor.connection.sendToParent("stackQuery",n).then(a).catch(u)},t}();e.default=s},function(t,e,n){t.exports=n(6),t.exports.default=t.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=["file","reference","blocks","group","global_field"];var i=function(){function t(t,e,n){this.uid=t.data.uid,this.data_type=t.data.schema.data_type,this.schema=t.data.schema,this._emitter=n;var r,i,o,a,u=(r=this,i=t.data.value,o=i,a=i,"file"===r.data_type&&(i?(o=i,a=!0===r.schema.multiple?i.map((function(t){return t.uid})):i.uid):!0===r.schema.multiple&&(o=[],a=[])),{resolvedData:o,unResolvedData:a});this._data=u.unResolvedData,this._resolvedData=u.resolvedData,this._connection=e,this._self=t.data.self||!1;var s=this;n.on("updateFields",(function(t){var e=s.uid.split("."),n=t.data;e.forEach((function(t){n&&(n=n[t])})),s._data!==n&&(s._data=n)}))}return t.prototype.setData=function(t){var e=this,n=this,i={data:t,uid:n.uid,self:n._self};return n._self||-1===r.indexOf(n.data_type)&&n.data_type?this._connection.sendToParent("setData",i).then((function(){return e._data=t,Promise.resolve(n)})).catch((function(t){return Promise.reject(t)})):Promise.reject(new Error("Cannot call set data for current field type"))},t.prototype.getData=function(t){var e=(void 0===t?{}:t).resolved;return void 0!==e&&e?this._resolvedData:this._data},t.prototype.setFocus=function(){return this._connection.sendToParent("focus")},t.prototype.onChange=function(t){var e=this;if(!t||"function"!=typeof t)throw Error("Callback must be a function");this._emitter.on("extensionFieldChange",(function(n){e._data=n.data,e._resolvedData=n.data,t(n.data)}))},t}();e.default=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(5)),o=r(n(2)),a=n(22);o.default.CONFIG.LOG_LEVEL="error";var u=function(){function t(){}return t.init=function(){var t=this;return this._extension?Promise.resolve(this._extension):i.default.initialize(a.version).then((function(e){return t._extension=new i.default(e),console.error("mayhem app-sdk: extension obj",t._extension),Promise.resolve(t._extension)})).catch((function(t){return Promise.reject(t)}))},Object.defineProperty(t,"SDK_VERSION",{get:function(){return a.version},enumerable:!1,configurable:!0}),t}();e.default=u,t.exports=u},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(2)),s=a(n(3)),c=a(n(12)),f=a(n(13)),d=a(n(18)),h=a(n(19)),l=new(a(n(20)).default),p=function(){function t(t){var e=this,r=t;switch(this.postRobot=u.default,this.config=r.data.config,this.currentUser=r.data.user,this.location=r.data.type||"FIELD",this.store=new h.default(u.default),this.stack=new f.default(r.data.stack,u.default),this.Extension={DashboardWidget:null,CustomField:null,SidebarWidget:null,RTEPlugin:null},r.data.type){case"DASHBOARD":this.Extension.DashboardWidget={frame:new c.default(u.default,this.location,l,r.data.dashboard_width),stack:new f.default(r.data.stack,u.default)};break;case"SIDEBAR":this.Extension.SidebarWidget={entry:new d.default(r,u.default,l),stack:new f.default(r.data.stack,u.default)};break;case"RTE":Promise.resolve().then((function(){return o(n(21))})).then((function(t){var n=t.rtePluginInitializer;e.Extension.RTEPlugin=n}));break;case"FIELD":default:this.Extension.CustomField={field:new s.default(r,u.default,l),fieldConfig:r.data.field_config,entry:new d.default(r,u.default,l),stack:new f.default(r.data.stack,u.default),frame:new c.default(u.default,this.location,l)}}u.default.on("extensionEvent",(function(t){"entrySave"===t.data.name&&(l.emitEvent("entrySave",[{data:t.data.data}]),l.emitEvent("updateFields",[{data:t.data.data}])),"entryChange"===t.data.name&&l.emitEvent("entryChange",[{data:t.data.data}]),"entryPublish"===t.data.name&&l.emitEvent("entryPublish",[{data:t.data.data}]),"entryUnPublish"===t.data.name&&l.emitEvent("entryUnPublish",[{data:t.data.data}]),"dashboardResize"===t.data.name&&l.emitEvent("dashboardResize",[{state:t.data.state}]),"extensionFieldChange"===t.data.name&&l.emitEvent("extensionFieldChange",[{data:t.data.data}])}))}return t.initialize=function(t){return u.default.sendToParent("init",{version:t})},t.prototype.setReady=function(){return this.postRobot.sendToParent("ready")},t}();e.default=p},function(t,e,n){(function(e){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return{}.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,n,r){"use strict";function i(t){return"[object RegExp]"==={}.toString.call(t)}r.r(n),r.d(n,"Promise",(function(){return k})),r.d(n,"TYPES",(function(){return $t})),r.d(n,"ProxyWindow",(function(){return Pt})),r.d(n,"setup",(function(){return Qt})),r.d(n,"destroy",(function(){return Ht})),r.d(n,"serializeMessage",(function(){return Nt})),r.d(n,"deserializeMessage",(function(){return Yt})),r.d(n,"createProxyWindow",(function(){return Ft})),r.d(n,"toProxyWindow",(function(){return Kt})),r.d(n,"on",(function(){return Bt})),r.d(n,"once",(function(){return Ut})),r.d(n,"send",(function(){return zt})),r.d(n,"markWindowKnown",(function(){return ht})),r.d(n,"cleanUpWindow",(function(){return Jt})),r.d(n,"bridge",(function(){}));var o="Call was rejected by callee.\r\n";function a(t){return void 0===t&&(t=window),"about:"===t.location.protocol}function u(t){if(void 0===t&&(t=window),t)try{if(t.parent&&t.parent!==t)return t.parent}catch(t){}}function s(t){if(void 0===t&&(t=window),t&&!u(t))try{return t.opener}catch(t){}}function c(t){try{return!0}catch(t){}return!1}function f(t){void 0===t&&(t=window);var e=t.location;if(!e)throw new Error("Can not read window location");var n=e.protocol;if(!n)throw new Error("Can not read window protocol");if("file:"===n)return"file://";if("about:"===n){var r=u(t);return r&&c()?f(r):"about://"}var i=e.host;if(!i)throw new Error("Can not read window host");return n+"//"+i}function d(t){void 0===t&&(t=window);var e=f(t);return e&&t.mockDomain&&0===t.mockDomain.indexOf("mock:")?t.mockDomain:e}function h(t){if(!function(t){try{if(t===window)return!0}catch(t){}try{var e=Object.getOwnPropertyDescriptor(t,"location");if(e&&!1===e.enumerable)return!1}catch(t){}try{if(a(t)&&c())return!0}catch(t){}try{if(f(t)===f(window))return!0}catch(t){}return!1}(t))return!1;try{if(t===window)return!0;if(a(t)&&c())return!0;if(d(window)===d(t))return!0}catch(t){}return!1}function l(t){if(!h(t))throw new Error("Expected window to be same domain");return t}function p(t,e){if(!t||!e)return!1;var n=u(e);return n?n===t:-1!==function(t){var e=[];try{for(;t.parent!==t;)e.push(t.parent),t=t.parent}catch(t){}return e}(e).indexOf(t)}function y(t){var e,n,r=[];try{e=t.frames}catch(n){e=t}try{n=e.length}catch(t){}if(0===n)return r;if(n){for(var i=0;i<n;i++){var o=void 0;try{o=e[i]}catch(t){continue}r.push(o)}return r}for(var a=0;a<100;a++){var u=void 0;try{u=e[a]}catch(t){return r}if(!u)return r;r.push(u)}return r}var g=[],v=[];function w(t,e){void 0===e&&(e=!0);try{if(t===window)return!1}catch(t){return!0}try{if(!t)return!0}catch(t){return!0}try{if(t.closed)return!0}catch(t){return!t||t.message!==o}if(e&&h(t))try{if(t.mockclosed)return!0}catch(t){}try{if(!t.parent||!t.top)return!0}catch(t){}var n=function(t,e){for(var n=0;n<t.length;n++)try{if(t[n]===e)return n}catch(t){}return-1}(g,t);if(-1!==n){var r=v[n];if(r&&function(t){if(!t.contentWindow)return!0;if(!t.parentNode)return!0;var e=t.ownerDocument;if(e&&e.documentElement&&!e.documentElement.contains(t)){for(var n=t;n.parentNode&&n.parentNode!==n;)n=n.parentNode;if(!n.host||!e.documentElement.contains(n.host))return!0}return!1}(r))return!0}return!1}function m(t){return void 0===t&&(t=window),s(t=t||window)||u(t)||void 0}function _(t,e){if("string"==typeof t){if("string"==typeof e)return"*"===t||e===t;if(i(e))return!1;if(Array.isArray(e))return!1}return i(t)?i(e)?t.toString()===e.toString():!Array.isArray(e)&&Boolean(e.match(t)):!!Array.isArray(t)&&(Array.isArray(e)?JSON.stringify(t)===JSON.stringify(e):!i(e)&&t.some((function(t){return _(t,e)})))}function b(t){try{if(t===window)return!0}catch(t){if(t&&t.message===o)return!0}try{if("[object Window]"==={}.toString.call(t))return!0}catch(t){if(t&&t.message===o)return!0}try{if(window.Window&&t instanceof window.Window)return!0}catch(t){if(t&&t.message===o)return!0}try{if(t&&t.self===t)return!0}catch(t){if(t&&t.message===o)return!0}try{if(t&&t.parent===t)return!0}catch(t){if(t&&t.message===o)return!0}try{if(t&&t.top===t)return!0}catch(t){if(t&&t.message===o)return!0}try{if(t&&"__unlikely_value__"===t.__cross_domain_utils_window_check__)return!1}catch(t){return!0}try{if("postMessage"in t&&"self"in t&&"location"in t)return!0}catch(t){}return!1}function E(t){try{t.close()}catch(t){}}function P(t){try{if(!t)return!1;if("undefined"!=typeof Promise&&t instanceof Promise)return!0;if("undefined"!=typeof window&&"function"==typeof window.Window&&t instanceof window.Window)return!1;if("undefined"!=typeof window&&"function"==typeof window.constructor&&t instanceof window.constructor)return!1;var e={}.toString;if(e){var n=e.call(t);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof t.then)return!0}catch(t){return!1}return!1}var A,O=[],j=[],S=0;function T(){if(!S&&A){var t=A;A=null,t.resolve()}}function x(){S+=1}function R(){S-=1,T()}var k=function(){function t(t){var e=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var n,r,i=!1,o=!1,a=!1;x();try{t((function(t){a?e.resolve(t):(i=!0,n=t)}),(function(t){a?e.reject(t):(o=!0,r=t)}))}catch(t){return R(),void this.reject(t)}R(),a=!0,i?this.resolve(n):o&&this.reject(r)}}var e=t.prototype;return e.resolve=function(t){if(this.resolved||this.rejected)return this;if(P(t))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=t,this.dispatch(),this},e.reject=function(t){var e=this;if(this.resolved||this.rejected)return this;if(P(t))throw new Error("Can not reject promise with another promise");if(!t){var n=t&&"function"==typeof t.toString?t.toString():{}.toString.call(t);t=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=t,this.errorHandled||setTimeout((function(){e.errorHandled||function(t,e){if(-1===O.indexOf(t)){O.push(t),setTimeout((function(){throw t}),1);for(var n=0;n<j.length;n++)j[n](t,e)}}(t,e)}),1),this.dispatch(),this},e.asyncReject=function(t){return this.errorHandled=!0,this.reject(t),this},e.dispatch=function(){var e=this.resolved,n=this.rejected,r=this.handlers;if(!this.dispatching&&(e||n)){this.dispatching=!0,x();for(var i=function(t,e){return t.then((function(t){e.resolve(t)}),(function(t){e.reject(t)}))},o=0;o<r.length;o++){var a=r[o],u=a.onSuccess,s=a.onError,c=a.promise,f=void 0;if(e)try{f=u?u(this.value):this.value}catch(t){c.reject(t);continue}else if(n){if(!s){c.reject(this.error);continue}try{f=s(this.error)}catch(t){c.reject(t);continue}}if(f instanceof t&&(f.resolved||f.rejected)){var d=f;d.resolved?c.resolve(d.value):c.reject(d.error),d.errorHandled=!0}else P(f)?f instanceof t&&(f.resolved||f.rejected)?f.resolved?c.resolve(f.value):c.reject(f.error):i(f,c):c.resolve(f)}r.length=0,this.dispatching=!1,R()}},e.then=function(e,n){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new t;return this.handlers.push({promise:r,onSuccess:e,onError:n}),this.errorHandled=!0,this.dispatch(),r},e.catch=function(t){return this.then(void 0,t)},e.finally=function(e){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.finally expected a function");return this.then((function(n){return t.try(e).then((function(){return n}))}),(function(n){return t.try(e).then((function(){throw n}))}))},e.timeout=function(t,e){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout((function(){n.resolved||n.rejected||n.reject(e||new Error("Promise timed out after "+t+"ms"))}),t);return this.then((function(t){return clearTimeout(r),t}))},e.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},t.resolve=function(e){return e instanceof t?e:P(e)?new t((function(t,n){return e.then(t,n)})):(new t).resolve(e)},t.reject=function(e){return(new t).reject(e)},t.asyncReject=function(e){return(new t).asyncReject(e)},t.all=function(e){var n=new t,r=e.length,i=[].slice();if(!r)return n.resolve(i),n;for(var o=function(t,e,o){return e.then((function(e){i[t]=e,0==(r-=1)&&n.resolve(i)}),(function(t){o.reject(t)}))},a=0;a<e.length;a++){var u=e[a];if(u instanceof t){if(u.resolved){i[a]=u.value,r-=1;continue}}else if(!P(u)){i[a]=u,r-=1;continue}o(a,t.resolve(u),n)}return 0===r&&n.resolve(i),n},t.hash=function(e){var n={},r=[],i=function(t){if(e.hasOwnProperty(t)){var i=e[t];P(i)?r.push(i.then((function(e){n[t]=e}))):n[t]=i}};for(var o in e)i(o);return t.all(r).then((function(){return n}))},t.map=function(e,n){return t.all(e.map(n))},t.onPossiblyUnhandledException=function(t){return function(t){return j.push(t),{cancel:function(){j.splice(j.indexOf(t),1)}}}(t)},t.try=function(e,n,r){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var i;x();try{i=e.apply(n,r||[])}catch(e){return R(),t.reject(e)}return R(),t.resolve(i)},t.delay=function(e){return new t((function(t){setTimeout(t,e)}))},t.isPromise=function(e){return!!(e&&e instanceof t)||P(e)},t.flush=function(){return e=t,n=A=A||new e,T(),n;var e,n},t}();function D(t,e){for(var n=0;n<t.length;n++)try{if(t[n]===e)return n}catch(t){}return-1}var C,q=function(){function t(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var t=new WeakMap,e={};return Object.freeze(e),t.set(e,"__testvalue__"),"__testvalue__"===t.get(e)}catch(t){return!1}}())try{this.weakmap=new WeakMap}catch(t){}this.keys=[],this.values=[]}var e=t.prototype;return e._cleanupClosedWindows=function(){for(var t=this.weakmap,e=this.keys,n=0;n<e.length;n++){var r=e[n];if(b(r)&&w(r)){if(t)try{t.delete(r)}catch(t){}e.splice(n,1),this.values.splice(n,1),n-=1}}},e.isSafeToReadWrite=function(t){return!b(t)},e.set=function(t,e){if(!t)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(t,e)}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var r=this.name,i=t[r];return void(i&&i[0]===t?i[1]=e:Object.defineProperty(t,r,{value:[t,e],writable:!0}))}catch(t){}this._cleanupClosedWindows();var o=this.keys,a=this.values,u=D(o,t);-1===u?(o.push(t),a.push(e)):a[u]=e},e.get=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(t))return e.get(t)}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];return n&&n[0]===t?n[1]:void 0}catch(t){}this._cleanupClosedWindows();var r=D(this.keys,t);if(-1!==r)return this.values[r]},e.delete=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.delete(t)}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];n&&n[0]===t&&(n[0]=n[1]=void 0)}catch(t){}this._cleanupClosedWindows();var r=this.keys,i=D(r,t);-1!==i&&(r.splice(i,1),this.values.splice(i,1))},e.has=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(t))return!0}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];return!(!n||n[0]!==t)}catch(t){}return this._cleanupClosedWindows(),-1!==D(this.keys,t)},e.getOrSet=function(t,e){if(this.has(t))return this.get(t);var n=e();return this.set(t,n),n},t}();function M(t){return t.name||t.__name__||t.displayName||"anonymous"}function W(t,e){try{delete t.name,t.name=e}catch(t){}return t.__name__=t.displayName=e,t}function I(){var t="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,(function(){return t.charAt(Math.floor(Math.random()*t.length))}))+"_"+function(t){if("function"==typeof btoa)return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))}))).replace(/[=]/g,"");if(void 0!==e)return e.from(t,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function L(t){try{return JSON.stringify([].slice.call(t),(function(t,e){return"function"==typeof e?"memoize["+function(t){if(C=C||new q,null==t||"object"!=typeof t&&"function"!=typeof t)throw new Error("Invalid object");var e=C.get(t);return e||(e=typeof t+":"+I(),C.set(t,e)),e}(e)+"]":e}))}catch(t){throw new Error("Arguments not serializable -- can not be used to memoize")}}function B(){return{}}var U=0,z=0;function N(t,e){void 0===e&&(e={});var n,r,i=e.thisNamespace,o=void 0!==i&&i,a=e.time,u=U;U+=1;var s=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];var c;u<z&&(n=null,r=null,u=U,U+=1),c=o?(r=r||new q).getOrSet(this,B):n=n||{};var f=L(i),d=c[f];if(d&&a&&Date.now()-d.time<a&&(delete c[f],d=null),d)return d.value;var h=Date.now(),l=t.apply(this,arguments);return c[f]={time:h,value:l},l};return s.reset=function(){n=null,r=null},W(s,(e.name||M(t))+"::memoized")}function Y(t){var e={};function n(){for(var n=arguments,r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var u=L(o);return e.hasOwnProperty(u)||(e[u]=k.try((function(){return t.apply(r,n)})).finally((function(){delete e[u]}))),e[u]}return n.reset=function(){e={}},W(n,M(t)+"::promiseMemoized")}function F(){}function K(t,e){if(void 0===e&&(e=1),e>=3)return"stringifyError stack overflow";try{if(!t)return"<unknown error: "+{}.toString.call(t)+">";if("string"==typeof t)return t;if(t instanceof Error){var n=t&&t.stack,r=t&&t.message;if(n&&r)return-1!==n.indexOf(r)?n:r+"\n"+n;if(n)return n;if(r)return r}return t&&t.toString&&"function"==typeof t.toString?t.toString():{}.toString.call(t)}catch(t){return"Error while stringifying error: "+K(t,e+1)}}function Q(t){return"string"==typeof t?t:t&&t.toString&&"function"==typeof t.toString?t.toString():{}.toString.call(t)}function H(t){return"[object RegExp]"==={}.toString.call(t)}function $(t,e,n){if(t.hasOwnProperty(e))return t[e];var r=n();return t[e]=r,r}function J(){var t=document.body;if(!t)throw new Error("Body element not found");return t}function V(){return Boolean(document.body)&&"complete"===document.readyState}function G(){return Boolean(document.body)&&"interactive"===document.readyState}N.clear=function(){z=U},N((function(t){if(Object.values)return Object.values(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e})),Error,N((function(){return new k((function(t){if(V()||G())return t();var e=setInterval((function(){if(V()||G())return clearInterval(e),t()}),10)}))}));var X="undefined"!=typeof document?document.currentScript:null,Z=N((function(){if(X)return X;if(X=function(){try{var t=function(){try{throw new Error("_")}catch(t){return t.stack||""}}(),e=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(t),n=e&&e[1];if(!n)return;for(var r=0,i=[].slice.call(document.getElementsByTagName("script")).reverse();r<i.length;r++){var o=i[r];if(o.src&&o.src===n)return o}}catch(t){}}())return X;throw new Error("Can not determine current script")})),tt=I();function et(t){void 0===t&&(t=window);var e="__post_robot_10_0_44__";return t!==window?t[e]:t[e]=t[e]||{}}N((function(){var t;try{t=Z()}catch(t){return tt}var e=t.getAttribute("data-uid");if(e&&"string"==typeof e)return e;if((e=t.getAttribute("data-uid-auto"))&&"string"==typeof e)return e;if(t.src){var n=function(t){for(var e="",n=0;n<t.length;n++){var r=t[n].charCodeAt(0)*n;t[n+1]&&(r+=t[n+1].charCodeAt(0)*(n-1)),e+=String.fromCharCode(97+Math.abs(r)%26)}return e}(JSON.stringify({src:t.src,dataset:t.dataset}));e="uid_"+n.slice(n.length-30)}else e=I();return t.setAttribute("data-uid-auto",e),e}));var nt=function(){return{}};function rt(t,e){return void 0===t&&(t="store"),void 0===e&&(e=nt),$(et(),t,(function(){var t=e();return{has:function(e){return t.hasOwnProperty(e)},get:function(e,n){return t.hasOwnProperty(e)?t[e]:n},set:function(e,n){return t[e]=n,n},del:function(e){delete t[e]},getOrSet:function(e,n){return $(t,e,n)},reset:function(){t=e()},keys:function(){return Object.keys(t)}}}))}var it,ot=function(){};function at(){var t=et();return t.WINDOW_WILDCARD=t.WINDOW_WILDCARD||new ot,t.WINDOW_WILDCARD}function ut(t,e){return void 0===t&&(t="store"),void 0===e&&(e=nt),rt("windowStore").getOrSet(t,(function(){var n=new q,r=function(t){return n.getOrSet(t,e)};return{has:function(e){return r(e).hasOwnProperty(t)},get:function(e,n){var i=r(e);return i.hasOwnProperty(t)?i[t]:n},set:function(e,n){return r(e)[t]=n,n},del:function(e){delete r(e)[t]},getOrSet:function(e,n){return $(r(e),t,n)}}}))}function st(){return rt("instance").getOrSet("instanceID",I)}function ct(t,e){var n=e.domain,r=ut("helloPromises"),i=r.get(t);i&&i.resolve({domain:n});var o=k.resolve({domain:n});return r.set(t,o),o}function ft(t,e){return(0,e.send)(t,"postrobot_hello",{instanceID:st()},{domain:"*",timeout:-1}).then((function(e){var n=e.origin,r=e.data.instanceID;return ct(t,{domain:n}),{win:t,domain:n,instanceID:r}}))}function dt(t,e){var n=e.send;return ut("windowInstanceIDPromises").getOrSet(t,(function(){return ft(t,{send:n}).then((function(t){return t.instanceID}))}))}function ht(t){ut("knownWindows").set(t,!0)}function lt(t){return"object"==typeof t&&null!==t&&"string"==typeof t.__type__}function pt(t){return void 0===t?"undefined":null===t?"null":Array.isArray(t)?"array":"function"==typeof t?"function":"object"==typeof t?t instanceof Error?"error":"function"==typeof t.then?"promise":"[object RegExp]"==={}.toString.call(t)?"regex":"[object Date]"==={}.toString.call(t)?"date":"object":"string"==typeof t?"string":"number"==typeof t?"number":"boolean"==typeof t?"boolean":void 0}function yt(t,e){return{__type__:t,__val__:e}}var gt,vt=((it={}).function=function(){},it.error=function(t){return yt("error",{message:t.message,stack:t.stack,code:t.code,data:t.data})},it.promise=function(){},it.regex=function(t){return yt("regex",t.source)},it.date=function(t){return yt("date",t.toJSON())},it.array=function(t){return t},it.object=function(t){return t},it.string=function(t){return t},it.number=function(t){return t},it.boolean=function(t){return t},it.null=function(t){return t},it),wt={},mt=((gt={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},gt.error=function(t){var e=t.stack,n=t.code,r=t.data,i=new Error(t.message);return i.code=n,r&&(i.data=r),i.stack=e+"\n\n"+i.stack,i},gt.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},gt.regex=function(t){return new RegExp(t)},gt.date=function(t){return new Date(t)},gt.array=function(t){return t},gt.object=function(t){return t},gt.string=function(t){return t},gt.number=function(t){return t},gt.boolean=function(t){return t},gt.null=function(t){return t},gt),_t={};function bt(){for(var t=rt("idToProxyWindow"),e=0,n=t.keys();e<n.length;e++){var r=n[e];t.get(r).shouldClean()&&t.del(r)}}function Et(t,e){var n=e.send,r=e.id,i=void 0===r?I():r,o=t.then((function(t){if(h(t))return l(t).name})),a=t.then((function(t){if(w(t))throw new Error("Window is closed, can not determine type");return s(t)?"popup":"iframe"}));o.catch(F),a.catch(F);var u=function(){return t.then((function(t){if(!w(t))return h(t)?l(t).name:o}))};return{id:i,getType:function(){return a},getInstanceID:Y((function(){return t.then((function(t){return dt(t,{send:n})}))})),close:function(){return t.then(E)},getName:u,focus:function(){return t.then((function(t){t.focus()}))},isClosed:function(){return t.then((function(t){return w(t)}))},setLocation:function(e,n){return void 0===n&&(n={}),t.then((function(t){var r=window.location.protocol+"//"+window.location.host,i=n.method,o=void 0===i?"get":i,a=n.body;if(0===e.indexOf("/"))e=""+r+e;else if(!e.match(/^https?:\/\//)&&0!==e.indexOf(r))throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(e));if("post"===o)return u().then((function(t){if(!t)throw new Error("Can not post to window without target name");!function(t){var e=t.url,n=t.target,r=t.body,i=t.method,o=void 0===i?"post":i,a=document.createElement("form");if(a.setAttribute("target",n),a.setAttribute("method",o),a.setAttribute("action",e),a.style.display="none",r)for(var u=0,s=Object.keys(r);u<s.length;u++){var c,f=s[u],d=document.createElement("input");d.setAttribute("name",f),d.setAttribute("value",null==(c=r[f])?void 0:c.toString()),a.appendChild(d)}J().appendChild(a),a.submit(),J().removeChild(a)}({url:e,target:t,method:o,body:a})}));if("get"!==o)throw new Error("Unsupported method: "+o);if(h(t))try{if(t.location&&"function"==typeof t.location.replace)return void t.location.replace(e)}catch(t){}t.location=e}))},setName:function(e){return t.then((function(t){var n=h(t),r=function(t){if(h(t))return l(t).frameElement;for(var e=0,n=document.querySelectorAll("iframe");e<n.length;e++){var r=n[e];if(r&&r.contentWindow&&r.contentWindow===t)return r}}(t);if(!n)throw new Error("Can not set name for cross-domain window: "+e);l(t).name=e,r&&r.setAttribute("name",e),o=k.resolve(e)}))}}}new k((function(t){if(window.document&&window.document.body)return t(window.document.body);var e=setInterval((function(){if(window.document&&window.document.body)return clearInterval(e),t(window.document.body)}),10)}));var Pt=function(){function t(t){var e=t.send,n=t.win,r=t.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new k,this.serializedWindow=r||Et(this.actualWindowPromise,{send:e}),rt("idToProxyWindow").set(this.getID(),this),n&&this.setWindow(n,{send:e})}var e=t.prototype;return e.getID=function(){return this.serializedWindow.id},e.getType=function(){return this.serializedWindow.getType()},e.isPopup=function(){return this.getType().then((function(t){return"popup"===t}))},e.setLocation=function(t,e){var n=this;return this.serializedWindow.setLocation(t,e).then((function(){return n}))},e.getName=function(){return this.serializedWindow.getName()},e.setName=function(t){var e=this;return this.serializedWindow.setName(t).then((function(){return e}))},e.close=function(){var t=this;return this.serializedWindow.close().then((function(){return t}))},e.focus=function(){var t=this,e=this.isPopup(),n=this.getName(),r=k.hash({isPopup:e,name:n}).then((function(t){var e=t.name;t.isPopup&&e&&window.open("",e)})),i=this.serializedWindow.focus();return k.all([r,i]).then((function(){return t}))},e.isClosed=function(){return this.serializedWindow.isClosed()},e.getWindow=function(){return this.actualWindow},e.setWindow=function(t,e){var n=e.send;this.actualWindow=t,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=Et(this.actualWindowPromise,{send:n,id:this.getID()}),ut("winToProxyWindow").set(t,this)},e.awaitWindow=function(){return this.actualWindowPromise},e.matchWindow=function(t,e){var n=this,r=e.send;return k.try((function(){return n.actualWindow?t===n.actualWindow:k.hash({proxyInstanceID:n.getInstanceID(),knownWindowInstanceID:dt(t,{send:r})}).then((function(e){var i=e.proxyInstanceID===e.knownWindowInstanceID;return i&&n.setWindow(t,{send:r}),i}))}))},e.unwrap=function(){return this.actualWindow||this},e.getInstanceID=function(){return this.serializedWindow.getInstanceID()},e.shouldClean=function(){return Boolean(this.actualWindow&&w(this.actualWindow))},e.serialize=function(){return this.serializedWindow},t.unwrap=function(e){return t.isProxyWindow(e)?e.unwrap():e},t.serialize=function(e,n){var r=n.send;return bt(),t.toProxyWindow(e,{send:r}).serialize()},t.deserialize=function(e,n){var r=n.send;return bt(),rt("idToProxyWindow").get(e.id)||new t({serializedWindow:e,send:r})},t.isProxyWindow=function(t){return Boolean(t&&!b(t)&&t.isProxyWindow)},t.toProxyWindow=function(e,n){var r=n.send;if(bt(),t.isProxyWindow(e))return e;var i=e;return ut("winToProxyWindow").get(i)||new t({win:i,send:r})},t}();function At(t,e,n,r,i){var o=ut("methodStore"),a=rt("proxyWindowMethods");Pt.isProxyWindow(r)?a.set(t,{val:e,name:n,domain:i,source:r}):(a.del(t),o.getOrSet(r,(function(){return{}}))[t]={domain:i,name:n,val:e,source:r})}function Ot(t,e){var n=ut("methodStore"),r=rt("proxyWindowMethods");return n.getOrSet(t,(function(){return{}}))[e]||r.get(e)}function jt(t,e,n,r,i){var o,a,u;a=(o={on:i.on,send:i.send}).on,u=o.send,rt("builtinListeners").getOrSet("functionCalls",(function(){return a("postrobot_method",{domain:"*"},(function(t){var e=t.source,n=t.origin,r=t.data,i=r.id,o=r.name,a=Ot(e,i);if(!a)throw new Error("Could not find method '"+o+"' with id: "+r.id+" in "+d(window));var s=a.source,c=a.domain,f=a.val;return k.try((function(){if(!_(c,n))throw new Error("Method '"+r.name+"' domain "+JSON.stringify(H(a.domain)?a.domain.source:a.domain)+" does not match origin "+n+" in "+d(window));if(Pt.isProxyWindow(s))return s.matchWindow(e,{send:u}).then((function(t){if(!t)throw new Error("Method call '"+r.name+"' failed - proxy window does not match source in "+d(window))}))})).then((function(){return f.apply({source:e,origin:n},r.args)}),(function(t){return k.try((function(){if(f.onError)return f.onError(t)})).then((function(){var e,n;throw t.stack&&(t.stack="Remote call to "+o+"("+(void 0===(e=r.args)&&(e=[]),(n=e,[].slice.call(n)).map((function(t){return"string"==typeof t?"'"+t+"'":void 0===t?"undefined":null===t?"null":"boolean"==typeof t?t.toString():Array.isArray(t)?"[ ... ]":"object"==typeof t?"{ ... }":"function"==typeof t?"() => { ... }":"<"+typeof t+">"})).join(", ")+") failed\n\n")+t.stack),t}))})).then((function(t){return{result:t,id:i,name:o}}))}))}));var s=n.__id__||I();t=Pt.unwrap(t);var c=n.__name__||n.name||r;return"string"==typeof c&&"function"==typeof c.indexOf&&0===c.indexOf("anonymous::")&&(c=c.replace("anonymous::",r+"::")),Pt.isProxyWindow(t)?(At(s,n,c,t,e),t.awaitWindow().then((function(t){At(s,n,c,t,e)}))):At(s,n,c,t,e),yt("cross_domain_function",{id:s,name:c})}function St(t,e,n,r){var i,o=r.on,a=r.send;return function(t,e){void 0===e&&(e=wt);var n=JSON.stringify(t,(function(t){var n=this[t];if(lt(this))return n;var r=pt(n);if(!r)return n;var i=e[r]||vt[r];return i?i(n,t):n}));return void 0===n?"undefined":n}(n,((i={}).promise=function(n,r){return function(t,e,n,r,i){return yt("cross_domain_zalgo_promise",{then:jt(t,e,(function(t,e){return n.then(t,e)}),r,{on:i.on,send:i.send})})}(t,e,n,r,{on:o,send:a})},i.function=function(n,r){return jt(t,e,n,r,{on:o,send:a})},i.object=function(t){return b(t)||Pt.isProxyWindow(t)?yt("cross_domain_window",Pt.serialize(t,{send:a})):t},i))}function Tt(t,e,n,r){var i,o=r.send;return function(t,e){if(void 0===e&&(e=_t),"undefined"!==t)return JSON.parse(t,(function(t,n){if(lt(this))return n;var r,i;if(lt(n)?(r=n.__type__,i=n.__val__):(r=pt(n),i=n),!r)return i;var o=e[r]||mt[r];return o?o(i,t):i}))}(n,((i={}).cross_domain_zalgo_promise=function(t){return function(t,e,n){return new k(n.then)}(0,0,t)},i.cross_domain_function=function(n){return function(t,e,n,r){var i=n.id,o=n.name,a=r.send,u=function(n){function r(){var u=arguments;return Pt.toProxyWindow(t,{send:a}).awaitWindow().then((function(t){var s=Ot(t,i);if(s&&s.val!==r)return s.val.apply({source:window,origin:d()},u);var c=[].slice.call(u);return n.fireAndForget?a(t,"postrobot_method",{id:i,name:o,args:c},{domain:e,fireAndForget:!0}):a(t,"postrobot_method",{id:i,name:o,args:c},{domain:e,fireAndForget:!1}).then((function(t){return t.data.result}))})).catch((function(t){throw t}))}return void 0===n&&(n={}),r.__name__=o,r.__origin__=e,r.__source__=t,r.__id__=i,r.origin=e,r},s=u();return s.fireAndForget=u({fireAndForget:!0}),s}(t,e,n,{send:o})},i.cross_domain_window=function(t){return Pt.deserialize(t,{send:o})},i))}var xt={};function Rt(t,e,n,r){var i=r.on,o=r.send;return k.try((function(){var r=ut().getOrSet(t,(function(){return{}}));return r.buffer=r.buffer||[],r.buffer.push(n),r.flush=r.flush||k.flush().then((function(){if(w(t))throw new Error("Window is closed");var n,a=St(t,e,((n={}).__post_robot_10_0_44__=r.buffer||[],n),{on:i,send:o});delete r.buffer;for(var u=Object.keys(xt),s=[],c=0;c<u.length;c++){var f=u[c];try{xt[f](t,a,e)}catch(t){s.push(t)}}if(s.length===u.length)throw new Error("All post-robot messaging strategies failed:\n\n"+s.map((function(t,e){return e+". "+K(t)})).join("\n\n"))})),r.flush.then((function(){delete r.flush}))})).then(F)}function kt(t){return rt("responseListeners").get(t)}function Dt(t){rt("responseListeners").del(t)}function Ct(t){return rt("erroredResponseListeners").has(t)}function qt(t){var e=t.name,n=t.win,r=t.domain,i=ut("requestListeners");if("*"===n&&(n=null),"*"===r&&(r=null),!e)throw new Error("Name required to get request listener");for(var o=0,a=[n,at()];o<a.length;o++){var u=a[o];if(u){var s=i.get(u);if(s){var c=s[e];if(c){if(r&&"string"==typeof r){if(c[r])return c[r];if(c.__domain_regex__)for(var f=0,d=c.__domain_regex__;f<d.length;f++){var h=d[f],l=h.listener;if(_(h.regex,r))return l}}if(c["*"])return c["*"]}}}}}function Mt(t,e,n,r){var i=r.on,o=r.send,a=qt({name:n.name,win:t,domain:e}),u="postrobot_method"===n.name&&n.data&&"string"==typeof n.data.name?n.data.name+"()":n.name;function s(r,a,s){return k.flush().then((function(){if(!n.fireAndForget&&!w(t))try{return Rt(t,e,{id:I(),origin:d(window),type:"postrobot_message_response",hash:n.hash,name:n.name,ack:r,data:a,error:s},{on:i,send:o})}catch(t){throw new Error("Send response message failed for "+u+" in "+d()+"\n\n"+K(t))}}))}return k.all([k.flush().then((function(){if(!n.fireAndForget&&!w(t))try{return Rt(t,e,{id:I(),origin:d(window),type:"postrobot_message_ack",hash:n.hash,name:n.name},{on:i,send:o})}catch(t){throw new Error("Send ack message failed for "+u+" in "+d()+"\n\n"+K(t))}})),k.try((function(){if(!a)throw new Error("No handler found for post message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!_(a.domain,e))throw new Error("Request origin "+e+" does not match domain "+a.domain.toString());return a.handler({source:t,origin:e,data:n.data})})).then((function(t){return s("success",t)}),(function(t){return s("error",null,t)}))]).then(F).catch((function(t){if(a&&a.handleError)return a.handleError(t);throw t}))}function Wt(t,e,n){if(!Ct(n.hash)){var r=kt(n.hash);if(!r)throw new Error("No handler found for post message ack for message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!_(r.domain,e))throw new Error("Ack origin "+e+" does not match domain "+r.domain.toString());if(t!==r.win)throw new Error("Ack source does not match registered window")}catch(t){r.promise.reject(t)}r.ack=!0}}function It(t,e,n){if(!Ct(n.hash)){var r,o=kt(n.hash);if(!o)throw new Error("No handler found for post message response for message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!_(o.domain,e))throw new Error("Response origin "+e+" does not match domain "+(r=o.domain,Array.isArray(r)?"("+r.join(" | ")+")":i(r)?"RegExp("+r.toString()+")":r.toString()));if(t!==o.win)throw new Error("Response source does not match registered window");Dt(n.hash),"error"===n.ack?o.promise.reject(n.error):"success"===n.ack&&o.promise.resolve({source:t,origin:e,data:n.data})}}function Lt(t,e){var n=e.on,r=e.send,i=rt("receivedMessages");try{if(!window||window.closed||!t.source)return}catch(t){return}var o=t.source,a=t.origin,u=function(t,e,n,r){var i,o=r.on,a=r.send;try{i=Tt(e,n,t,{on:o,send:a})}catch(t){return}if(i&&"object"==typeof i&&null!==i){var u=i.__post_robot_10_0_44__;if(Array.isArray(u))return u}}(t.data,o,a,{on:n,send:r});if(u){ht(o);for(var s=0;s<u.length;s++){var c=u[s];if(i.has(c.id))return;if(i.set(c.id,!0),w(o)&&!c.fireAndForget)return;0===c.origin.indexOf("file:")&&(a="file://");try{"postrobot_message_request"===c.type?Mt(o,a,c,{on:n,send:r}):"postrobot_message_response"===c.type?It(o,a,c):"postrobot_message_ack"===c.type&&Wt(o,a,c)}catch(t){setTimeout((function(){throw t}),0)}}}}function Bt(t,e,n){if(!t)throw new Error("Expected name");if("function"==typeof(e=e||{})&&(n=e,e={}),!n)throw new Error("Expected handler");(e=e||{}).name=t,e.handler=n||e.handler;var r=e.window,i=e.domain,o=function t(e,n){var r=e.name,i=e.win,o=e.domain,a=ut("requestListeners");if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(i)){for(var u=[],s=0,c=i;s<c.length;s++)u.push(t({name:r,domain:o,win:c[s]},n));return{cancel:function(){for(var t=0;t<u.length;t++)u[t].cancel()}}}if(Array.isArray(o)){for(var f=[],d=0,h=o;d<h.length;d++)f.push(t({name:r,win:i,domain:h[d]},n));return{cancel:function(){for(var t=0;t<f.length;t++)f[t].cancel()}}}var l=qt({name:r,win:i,domain:o});if(i&&"*"!==i||(i=at()),o=o||"*",l)throw i&&o?new Error("Request listener already exists for "+r+" on domain "+o.toString()+" for "+(i===at()?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" for "+(i===at()?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" on domain "+o.toString()):new Error("Request listener already exists for "+r);var p,y,g=a.getOrSet(i,(function(){return{}})),v=$(g,r,(function(){return{}})),w=o.toString();return H(o)?(p=$(v,"__domain_regex__",(function(){return[]}))).push(y={regex:o,listener:n}):v[w]=n,{cancel:function(){delete v[w],y&&(p.splice(p.indexOf(y,1)),p.length||delete v.__domain_regex__),Object.keys(v).length||delete g[r],i&&!Object.keys(g).length&&a.del(i)}}}({name:t,win:r,domain:i},{handler:e.handler,handleError:e.errorHandler||function(t){throw t},window:r,domain:i||"*",name:t});return{cancel:function(){o.cancel()}}}function Ut(t,e,n){"function"==typeof(e=e||{})&&(n=e,e={});var r,i=new k;return e.errorHandler=function(t){r.cancel(),i.reject(t)},r=Bt(t,e,(function(t){if(r.cancel(),i.resolve(t),n)return n(t)})),i.cancel=r.cancel,i}xt.postrobot_post_message=function(t,e,n){0===n.indexOf("file:")&&(n="*"),t.postMessage(e,n)};var zt=function t(e,n,r,i){var o=(i=i||{}).domain||"*",a=i.timeout||-1,s=i.timeout||5e3,c=i.fireAndForget||!1;return k.try((function(){if(function(t,e,n){if(!t)throw new Error("Expected name");if(n&&"string"!=typeof n&&!Array.isArray(n)&&!H(n))throw new TypeError("Can not send "+t+". Expected domain "+JSON.stringify(n)+" to be a string, array, or regex");if(w(e))throw new Error("Can not send "+t+". Target window is closed")}(n,e,o),function(t,e){var n=m(e);if(n)return n===t;if(e===t)return!1;if(function(t){void 0===t&&(t=window);try{if(t.top)return t.top}catch(t){}if(u(t)===t)return t;try{if(p(window,t)&&window.top)return window.top}catch(t){}try{if(p(t,window)&&window.top)return window.top}catch(t){}for(var e=0,n=function t(e){for(var n=[],r=0,i=y(e);r<i.length;r++){var o=i[r];n.push(o);for(var a=0,u=t(o);a<u.length;a++)n.push(u[a])}return n}(t);e<n.length;e++){var r=n[e];try{if(r.top)return r.top}catch(t){}if(u(r)===r)return r}}(e)===e)return!1;for(var r=0,i=y(t);r<i.length;r++)if(i[r]===e)return!0;return!1}(window,e))return function(t,e,n){void 0===e&&(e=5e3),void 0===n&&(n="Window");var r=function(t){return ut("helloPromises").getOrSet(t,(function(){return new k}))}(t);return-1!==e&&(r=r.timeout(e,new Error(n+" did not load after "+e+"ms"))),r}(e,s)})).then((function(n){return function(t,e,n,r){var i=r.send;return k.try((function(){return"string"==typeof e?e:k.try((function(){return n||ft(t,{send:i}).then((function(t){return t.domain}))})).then((function(t){if(!_(e,e))throw new Error("Domain "+Q(e)+" does not match "+Q(e));return t}))}))}(e,o,(void 0===n?{}:n).domain,{send:t})})).then((function(i){var o,u=i,s="postrobot_method"===n&&r&&"string"==typeof r.name?r.name+"()":n,f=new k,h=n+"_"+I();if(!c){var l={name:n,win:e,domain:u,promise:f};!function(t,e){rt("responseListeners").set(t,e)}(h,l);var p=ut("requestPromises").getOrSet(e,(function(){return[]}));p.push(f),f.catch((function(){!function(t){rt("erroredResponseListeners").set(t,!0)}(h),Dt(h)}));var y=function(t){return ut("knownWindows").get(t,!1)}(e)?1e4:2e3,g=a,v=y,m=g,_=(function t(){o=setTimeout((function(){w(e)?f.reject(new Error("Window closed for "+n+" before "+(l.ack?"response":"ack"))):l.cancelled?f.reject(new Error("Response listener was cancelled for "+n)):(v=Math.max(v-500,0),-1!==m&&(m=Math.max(m-500,0)),l.ack||0!==v?0===m&&f.reject(new Error("No response for postMessage "+s+" in "+d()+" in "+g+"ms")):f.reject(new Error("No ack for postMessage "+s+" in "+d()+" in "+y+"ms"))),t()}),500)}(),{cancel:function(){clearTimeout(o)}});f.finally((function(){_.cancel(),p.splice(p.indexOf(f,1))})).catch(F)}return Rt(e,u,{id:I(),origin:d(window),type:"postrobot_message_request",hash:h,name:n,data:r,fireAndForget:c},{on:Bt,send:t}).then((function(){return c?f.resolve():f}),(function(t){throw new Error("Send request message failed for "+s+" in "+d()+"\n\n"+K(t))}))}))};function Nt(t,e,n){return St(t,e,n,{on:Bt,send:zt})}function Yt(t,e,n){return Tt(t,e,n,{on:Bt,send:zt})}function Ft(t){return new Pt({send:zt,win:t})}function Kt(t){return Pt.toProxyWindow(t,{send:zt})}function Qt(){var t,e,n,r;et().initialized||(et().initialized=!0,e=(t={on:Bt,send:zt}).on,n=t.send,(r=et()).receiveMessage=r.receiveMessage||function(t){return Lt(t,{on:e,send:n})},function(t){var e=t.on,n=t.send;rt().getOrSet("postMessageListener",(function(){return t=window,r=function(t){!function(t,e){var n=e.on,r=e.send;k.try((function(){var e=t.source||t.sourceElement,i=t.origin||t.originalEvent&&t.originalEvent.origin,o=t.data;if("null"===i&&(i="file://"),e){if(!i)throw new Error("Post message did not have origin domain");Lt({source:e,origin:i,data:o},{on:n,send:r})}}))}(t,{on:e,send:n})},t.addEventListener("message",r),{cancel:function(){t.removeEventListener("message",r)}};var t,r}))}({on:Bt,send:zt}),function(t){var e=t.on,n=t.send;rt("builtinListeners").getOrSet("helloListener",(function(){var t=e("postrobot_hello",{domain:"*"},(function(t){return ct(t.source,{domain:t.origin}),{instanceID:st()}})),r=m();return r&&ft(r,{send:n}).catch((function(t){})),t}))}({on:Bt,send:zt}))}function Ht(){var t;!function(){for(var t=rt("responseListeners"),e=0,n=t.keys();e<n.length;e++){var r=n[e],i=t.get(r);i&&(i.cancelled=!0),t.del(r)}}(),(t=rt().get("postMessageListener"))&&t.cancel(),delete window.__post_robot_10_0_44__}var $t=!0;function Jt(t){for(var e=0,n=ut("requestPromises").get(t,[]);e<n.length;e++)n[e].reject(new Error("Window "+(w(t)?"closed":"cleaned up")+" before response")).catch(F)}Qt()}])}).call(this,n(7).Buffer)},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(9),i=n(10),o=n(11);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=u(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(s.isBuffer(e)){var n=0|l(e.length);return 0===(t=u(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(f(e),t=u(t,e<0?0:0|l(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|l(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function l(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,n);case"utf8":case"utf-8":return j(this,e,n);case"ascii":return S(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,i);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,i){var o,a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var f=-1;for(o=n;o<u;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===s)return f*a}else-1!==f&&(o-=o-f),f=-1}else for(n+s>u&&(n=u-s),o=n;o>=0;o--){for(var d=!0,h=0;h<s;h++)if(c(t,o+h)!==c(e,h)){d=!1;break}if(d)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u}return a}function _(t,e,n,r){return N(U(e,t.length-n),t,n,r)}function b(t,e,n,r){return N(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function E(t,e,n,r){return b(t,e,n,r)}function P(t,e,n,r){return N(z(e),t,n,r)}function A(t,e,n,r){return N(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function j(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,u,s,c=t[i],f=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&c)<<6|63&o)>127&&(f=s);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(s=(15&c)<<12|(63&o)<<6|63&a)>2047&&(s<55296||s>57343)&&(f=s);break;case 4:o=t[i+1],a=t[i+2],u=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&u)&&(s=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(f=s)}null===f?(f=65533,d=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=d}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=s,e.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return c(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return function(t,e,n,r){return f(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},s.allocUnsafe=function(t){return d(null,t)},s.allocUnsafeSlow=function(t){return d(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?j(this,0,t):y.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,i){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(o,a),c=this.slice(r,i),f=t.slice(e,n),d=0;d<u;++d)if(c[d]!==f[d]){o=c[d],a=f[d];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return E(this,t,e,n);case"base64":return P(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function x(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function R(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function C(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function q(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(t,e,n,r,o){return o||M(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function I(t,e,n,r,o){return o||M(t,0,n,8),i.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=s.prototype;else{var i=e-t;n=new s(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):q(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):q(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=0,a=1,u=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):q(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):q(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return W(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return W(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return I(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return I(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:U(new s(t,r).toString()),u=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%u]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function N(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(8))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],u=r[1],s=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,u)),f=0,d=u>0?a-4:a;for(n=0;n<d;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],s[f++]=e>>16&255,s[f++]=e>>8&255,s[f++]=255&e;2===u&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,s[f++]=255&e);1===u&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,s[f++]=e>>8&255,s[f++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,u=n-i;a<u;a+=16383)o.push(f(t,a,a+16383>u?u:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],i[a.charCodeAt(u)]=u;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var i,o,a=[],u=e;u<n;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,c=s>>1,f=-7,d=n?i-1:0,h=n?-1:1,l=t[e+d];for(d+=h,o=l&(1<<-f)-1,l>>=-f,f+=u;f>0;o=256*o+t[e+d],d+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+t[e+d],d+=h,f-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:1/0*(l?-1:1);a+=Math.pow(2,r),o-=c}return(l?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,u,s,c=8*o-i-1,f=(1<<c)-1,d=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:o-1,p=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+d>=1?h/s:h*Math.pow(2,1-d))*s>=2&&(a++,s/=2),a+d>=f?(u=0,a=f):a+d>=1?(u=(e*s-1)*Math.pow(2,i),a+=d):(u=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;t[n+l]=255&u,l+=p,u/=256,i-=8);for(a=a<<i|u,c+=i;c>0;t[n+l]=255&a,l+=p,a/=256,c-=8);t[n+l-p]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i={attributes:!0,childList:!0,subtree:!0},o=function(){function t(t,e,n,r){void 0===r&&(r="half_width"),this._connection=t,this._autoResizingEnabled=!1,this._resizingEnabled=!1,this.type=e,this.state=r,this._emitter=n}return t.prototype.enableResizing=function(){return"DASHBOARD"!==this.type?Promise.resolve():(this._resizingEnabled=!0,this._connection.sendToParent("window",{action:"enableResizing"}))},t.prototype.onDashboardResize=function(t){var e=this;if("DASHBOARD"!==this.type)return!1;if(!t||"function"!=typeof t)throw Error("Callback must be a function");return e._emitter.on("dashboardResize",(function(n){e.state=n.state,t(n.state)})),!0},t.prototype.updateHeight=function(t){if("DASHBOARD"===this.type&&"half_width"===this.state)return Promise.resolve();if(!t||isNaN(t))this._height=Math.ceil(document.documentElement.getBoundingClientRect().height);else{if(this._height===t)return Promise.resolve();this._height=t}return this._connection.sendToParent("resize",this._height)},t.prototype.enableAutoResizing=function(){return this._autoResizingEnabled||"half_width"===this.state&&"DASHBOARD"===this.type||(this._autoResizingEnabled=!0,(r=new MutationObserver(this.updateHeight.bind(this))).observe(window.document.body,i)),this},t.prototype.disableAutoResizing=function(){return this._autoResizingEnabled?(this._autoResizingEnabled=!1,r.disconnect(),this):this},t}();e.default=o},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(14)),o=r(n(16));function a(t){return"string"==typeof t.data?Promise.reject(t.data):Promise.resolve(t.data)}function u(t){return Promise.reject(t)}var s=function(){function t(t,e){this._connection=e,this._data=t,this.ContentType=o.default(e),this.Asset=i.default(e)}return t.prototype.getData=function(){return this._data},t.prototype.getContentType=function(t,e){if(void 0===e&&(e={}),!t)return Promise.reject(new Error("uid is required"));var n={uid:t,params:e,action:"getContentType"};return this._connection.sendToParent("stackQuery",n).then(a).catch(u)},t.prototype.getContentTypes=function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n=e;n.query=t;var r={params:n,action:"getContentTypes"};return this._connection.sendToParent("stackQuery",r).then(a).catch(u)},t.prototype.getEnvironment=function(t,e){if(void 0===e&&(e={}),!t)return Promise.reject(new Error("name is required"));var n={name:t,params:e,action:"getEnvironment"};return this._connection.sendToParent("stackQuery",n).then(a).catch(u)},t.prototype.getEnvironments=function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n=e;n.query=t;var r={params:n,action:"getEnvironments"};return this._connection.sendToParent("stackQuery",r).then(a).catch(u)},t.prototype.getLocale=function(t,e){if(void 0===e&&(e={}),!t)return Promise.reject(new Error("code is required"));var n={code:t,params:e,action:"getLocale"};return this._connection.sendToParent("stackQuery",n).then(a).catch(u)},t.prototype.getLocales=function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n=e;n.query=t;var r={params:n,action:"getLocales"};return this._connection.sendToParent("stackQuery",r).then(a).catch(u)},t}();e.default=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(1)),s=n(0),c={};function f(t){return"string"==typeof t.data?Promise.reject(t.data):Promise.resolve(t.data)}function d(t){return Promise.reject(t)}var h=function(t){function e(e){var n=t.call(this,e)||this;return n.getReferences=s.getReferences,n.environment=s.environment,n}return i(e,t),e.Query=function(){var e=t.Query.call(this);return Object.assign(e,{language:s.language,environment:s.environment}),e},e.module=function(t){return void 0===t&&(t=!1),t?"Assets":"Asset"},Object.defineProperty(e,"connection",{get:function(){return c},enumerable:!1,configurable:!0}),e.getRteAssets=function(){return this.connection.sendToParent("stackQuery",{action:"getRteAssets"}).then(f).catch(d)},e.getAssetsOfSpecificTypes=function(t){return t&&"string"==typeof t?this.connection.sendToParent("stackQuery",{action:"getAssetsOfSpecificTypes",asset_type:t}).then(f).catch(d):Promise.reject(new Error("Kindly provide valid parameters"))},e.prototype.publish=function(t){return!t||"object"!=typeof t||t instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("publishAsset",t)},e.prototype.unpublish=function(t){return!t||"object"!=typeof t||t instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("unpublishAsset",t)},e}(u.default);e.default=function(t){return c=t,new Proxy(h,{apply:function(t,e,n){return new(t.bind.apply(t,o([void 0],n)))}})}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(0));function u(t){return"string"==typeof t.data?Promise.reject(t.data):Promise.resolve(t.data)}function s(t){return Promise.reject(t)}var c=function(t){return function(e,n){if(e&&n&&"string"==typeof e&&void 0!==n)return this._query.query[e]=this._query.query.file_size||{},this._query.query[e][t]=n,this;throw Error("Kindly provide valid parameters.")}},f=function(t){var e=t?"$in":"$nin";return function(t,n){if(t&&n&&"string"==typeof t&&Array.isArray(n))return this._query.query[t]=this._query.query[t]||{},this._query.query[t][e]=this._query.query[t][e]||[],this._query.query[t][e]=this._query.query[t][e].concat(n),this;throw Error("Kindly provide valid parameters.")}},d=function(t){return function(e){if(e&&"string"==typeof e)return this._query.query[e]=this._query.query[e]||{},this._query.query[e].$exists=t,this;throw Error("Kindly provide valid parameters.")}},h=function(t){return function(){for(var e=[],n=0,r=arguments.length;n<r;n+=1)arguments[n]instanceof y&&arguments[n]._query.query?e.push(arguments[n]._query.query):"object"==typeof arguments[n]&&e.push(arguments[n]);return this._query.query[t]?this._query.query[t]=this._query.query[t].concat(e):this._query.query[t]=e,this}},l=function(t){return function(e){if(e&&"string"==typeof e)return this._query[t]=e,this;throw Error("Argument should be a string.")}},p=function(t){return function(e){if("number"==typeof e)return this._query[t]=e,this;throw Error("Argument should be a number.")}},y=function(){function t(t,e,n){this.module=e,this._connection=t,this._query={},this._query.query=this._query.query||{},this.contentTypeUid=n,this.only=a.transform("only"),this.except=a.transform("except"),this.addQuery=a.addQuery,this.lessThan=c("$lt"),this.lessThanOrEqualTo=c("$lte"),this.greaterThan=c("$gt"),this.greaterThanOrEqualTo=c("$gte"),this.notEqualTo=c("$ne"),this.containedIn=f(!0),this.notContainedIn=f(!1),this.exists=d(!0),this.notExists=d(!1),this.ascending=l("asc"),this.descending=l("desc"),this.beforeUid=l("before_uid"),this.afterUid=l("after_uid"),this.skip=p("skip"),this.limit=p("limit"),this.or=h("$or"),this.and=h("$and"),this.addParam=a.addParam}return t.prototype.equalTo=function(t,e){if(t&&"string"==typeof t)return this._query.query[t]=e,this;throw Error("Kindly provide valid parameters.")},t.prototype.where=function(t,e){if(t&&"string"==typeof t)return this._query.query[t]=e,this;throw Error("Kindly provide valid parameters.")},t.prototype.count=function(){this._query.count=!0;var t={content_type_uid:this.contentTypeUid,params:this._query,action:"get"+this.module};return this._connection.sendToParent("stackQuery",t).then(u).catch(s)},t.prototype.query=function(t){if("object"==typeof t)return this._query.query=a.mergeDeep(this._query.query,t),this;throw Error("Kindly provide valid parameters")},t.prototype.tags=function(t){if(Array.isArray(t))return this._query.tags=t,this;throw Error("Kindly provide valid parameters")},t.prototype.includeCount=function(){return this._query.include_count=!0,this},t.prototype.getQuery=function(){return this._query.query},t.prototype.regex=function(t,e,n){if(t&&e&&"string"==typeof t&&"string"==typeof e)return this._query.query[t]={$regex:e},n&&(this._query.query[t].$options=n),this;throw Error("Kindly provide valid parameters.")},t.prototype.search=function(t){if(t&&"string"==typeof t)return this._query.typeahead=t,this;throw Error("Kindly provide valid parameters.")},t.prototype.find=function(){var t={content_type_uid:this.contentTypeUid,params:this._query,action:"get"+this.module};return this._connection.sendToParent("stackQuery",t).then(u).catch(s)},t.prototype.findOne=function(){this.singleEntry=!0,this._query.limit=1;var t={content_type_uid:this.contentTypeUid,params:this._query,action:"get"+this.module};return this._connection.sendToParent("stackQuery",t).then(u).catch(s)},t}();e.default=y},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(17)),s=a(n(1)),c={},f=function(t){function e(e){var n=t.call(this,e)||this;return n.Entry=u.default(n.constructor.connection,n.uid),n}return i(e,t),Object.defineProperty(e,"connection",{get:function(){return c},enumerable:!1,configurable:!0}),e}(s.default);e.default=function(t){return c=t,new Proxy(f,{apply:function(t,e,n){return new(t.bind.apply(t,o([void 0],n)))}})}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(1)),s=n(0),c={},f="",d=function(t){function e(e){var n=t.call(this,e)||this;return n._query={},n}return i(e,t),e.Query=function(){var e=t.Query.call(this);return Object.assign(e,{language:s.language,environment:s.environment,includeOwner:s.includeOwner,includeContentType:s.includeContentType,includeSchema:s.includeSchema,includeReference:s.includeReference}),e},Object.defineProperty(e,"connection",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(e,"contentTypeUid",{get:function(){return f},enumerable:!1,configurable:!0}),e.module=function(t){return void 0===t&&(t=!1),t?"Entries":"Entry"},e.prototype.getLanguages=function(){return this.fetch("getEntryLanguages")},e.prototype.unlocalize=function(t){return t&&"string"==typeof t?(this._query.locale=t,this.fetch("unlocalizeEntry")):Promise.reject(new Error("Kindly provide valid parameters"))},e.prototype.publish=function(t){return!t||"object"!=typeof t||t instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):(this._query={},this.fetch("publishEntry",t))},e.prototype.unpublish=function(t){return!t||"object"!=typeof t||t instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):(this._query={},this.fetch("unpublishEntry",t))},e.prototype.setWorkflowStage=function(t){return!t||"object"!=typeof t||t instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("setWorkflowStageEntry",t)},e.prototype.update=function(t,e){return!t||"object"!=typeof t||t instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):(this._query.locale=e,this.fetch("updateEntry",t))},e}(u.default);e.default=function(t,e){return c=t,f=e,new Proxy(d,{apply:function(t,e,n){var r=new(t.bind.apply(t,o([void 0],n)));return Object.assign(r,{getReferences:s.getReferences,addQuery:s.addQuery,language:s.language,environment:s.environment,includeOwner:s.includeOwner,includeContentType:s.includeContentType,includeSchema:s.includeSchema,includeReference:s.includeReference}),r}})}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(3)),o=function(){function t(t,e,n){this.content_type=t.data.content_type,this._data=t.data.entry,this.locale=t.data.locale,this._connection=e,this._emitter=n;var r=this;this._emitter.on("entrySave",(function(t){r._data=t.data})),this._emitter.on("entryChange",(function(t){r._changedData=t.data}))}return t.prototype.getData=function(){return this._data},t.prototype.getField=function(t){var e=t.split("."),n=this._data,r=this.content_type.schema;try{var o=!1,a=!1;e.forEach((function(t,i){if(o)a?a=!1:o=!1;else{if(!(r=r.find((function(e){return e.uid===t}))))throw Error("schema not found");if(n=n[t],"group"!==r.data_type&&"global_field"!==r.data_type||!1!==r.multiple||e.length===i+1)if("group"!==r.data_type&&"global_field"!==r.data_type||!0!==r.multiple||e.length===i+1){if("blocks"===r.data_type&&e.length!==i+1){var u=Object.keys(n[e[i+1]])[0];r=r.blocks.find((function(t){return t.uid===u})),e.length===i+2?n=n[e[i+1]]:(n=n[e[i+1]][u],r=r.schema),o=!0,a=!0}}else r=r.schema,n=n[e[i+1]],o=!0;else r=r.schema}}))}catch(t){throw Error("Invalid uid, Field not found")}var u={data:{uid:t,value:n,schema:r,data_type:r.data_type}},s=new i.default(u,this._connection,this._emitter);return delete s.onChange,s},t.prototype.onSave=function(t){if(!t||"function"!=typeof t)throw Error("Callback must be a function");this._emitter.on("entrySave",(function(e){t(e.data)}))},t.prototype.onChange=function(t){if(!t||"function"!=typeof t)throw Error("Callback must be a function");this._emitter.on("entryChange",(function(e){t(e.data)}))},t.prototype.onPublish=function(t){if(!t||"function"!=typeof t)throw Error("Callback must be a function");this._emitter.on("entryPublish",(function(e){t(e.data)}))},t.prototype.onUnPublish=function(t){if(!t||"function"!=typeof t)throw Error("Callback must be a function");this._emitter.on("entryUnPublish",(function(e){t(e.data)}))},t}();e.default=o},function(t,e,n){"use strict";function r(t){return Promise.reject(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this._connection=t}return t.prototype.get=function(t){if(!t||"string"!=typeof t)throw new Error("Kindly provide valid parameters");return this._connection.sendToParent("store",{action:"get",key:t}).then((function(t){return Promise.resolve(t.data)})).catch(r)},t.prototype.getAll=function(){return this._connection.sendToParent("store",{action:"getAll"}).then((function(t){var e=t.data,n=void 0===e?{}:e;return Promise.resolve(n)})).catch(r)},t.prototype.set=function(t,e){if(!t||!e||"string"!=typeof t)throw new Error("Kindly provide valid parameters");return this._connection.sendToParent("store",{action:"set",key:t,value:e}).then((function(){return Promise.resolve(!0)})).catch(r)},t.prototype.remove=function(t){if(!t||"string"!=typeof t)throw new Error("Kindly provide valid parameters");return this._connection.sendToParent("store",{action:"remove",key:t}).then((function(){return Promise.resolve(!0)})).catch(r)},t.prototype.clear=function(){return this._connection.sendToParent("store",{action:"clear"}).then((function(){return Promise.resolve(!0)})).catch(r)},t}();e.default=i},function(t,e,n){var r;
/*!
 * EventEmitter v5.2.4 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */!function(e){"use strict";function i(){}var o=i.prototype,a=e.EventEmitter;function u(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function s(t){return function(){return this[t].apply(this,arguments)}}o.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp)for(n in e={},r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n]);else e=r[t]||(r[t]=[]);return e},o.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},o.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},o.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===u(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},o.on=s("addListener"),o.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},o.once=s("addOnceListener"),o.defineEvent=function(t){return this.getListeners(t),this},o.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},o.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&-1!==(n=u(i[r],e))&&i[r].splice(n,1);return this},o.off=s("removeListener"),o.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},o.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},o.manipulateListeners=function(t,e,n){var r,i,o=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)o.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(i=e[r])&&("function"==typeof i?o.call(this,r,i):a.call(this,r,i));return this},o.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},o.removeAllListeners=s("removeEvent"),o.emitEvent=function(t,e){var n,r,i,o,a=this.getListenersAsObject(t);for(o in a)if(a.hasOwnProperty(o))for(n=a[o].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},o.trigger=s("emitEvent"),o.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},o.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return e.EventEmitter=a,i},void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)}(this||{})},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.rtePluginInitializer=e.RTEPlugin=void 0;var i=function(t){var e=this;this.isContainer=!1,this.addPlugins=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.pluginMetaData.meta.isDependent)throw Error("cannot have another container inside");e.isContainer=!0,t.forEach((function(t){if(t.isContainer)throw Error("cannot have another container inside");t.pluginMetaData.registry.category=e.pluginMetaData.meta.id,e.containerMetaData.meta.dependentPlugins.push(t),t.pluginMetaData.meta.isDependent=!0}))},this.on=function(t,n){switch(t){case"beforeChildRender":e.pluginMetaData.registry.beforeChildrenRender=n;break;case"beforeRender":e.pluginMetaData.registry.beforeElementRender=n;break;case"exec":e.pluginMetaData.registry.handleMouseDown=n;break;case"render":e.pluginMetaData.registry.Component=n;break;case"paste":case"deleteBackward":case"deleteForward":case"insertBreak":case"normalize":e.pluginMetaData.meta.editorCallbacks[t]=n}},this.get=function(){return e.isContainer?e.containerMetaData:e.pluginMetaData},this.pluginMetaData=t,this.containerMetaData={registry:{id:this.pluginMetaData.meta.id,title:this.pluginMetaData.registry.title,rootCategory:!1,toolbar:r({},this.pluginMetaData.registry.toolbar)},meta:{id:this.pluginMetaData.meta.id,dependentPlugins:[]}}};e.RTEPlugin=i;e.rtePluginInitializer=function(t,e,n){if(!(t&&e&&n))throw Error("i am an error");var r={registry:{title:e,toolbar:{inMainToolbar:!0,inHoveringToolbar:!0},dndOptions:{}},meta:{id:t,elementType:null,editorCallbacks:{},isDependent:!1}};return Object.entries(n).forEach((function(t){var e=t[0],n=t[1];switch(e){case"icon":r.registry.icon=n;break;case"displayOn":if(r.registry.toolbar={inHoveringToolbar:!1,inMainToolbar:!1},"string"==typeof n)switch(n){case"toolbar":r.registry.toolbar.inMainToolbar=!0;break;case"hoveringToolbar":r.registry.toolbar.inHoveringToolbar=!0}else Array.isArray(n)&&n.forEach((function(t){switch(t){case"toolbar":r.registry.toolbar.inMainToolbar=!0;break;case"hoveringToolbar":r.registry.toolbar.inHoveringToolbar=!0}}));break;case"elementType":r.meta.elementType=n;break;case"dnd":"object"!=typeof n||Array.isArray(n)||(void 0===r.registry.dndOptions&&(r.registry.dndOptions={DisableDND:!1}),Object.entries(n).forEach((function(t){var e=t[0],n=t[1];switch(e){case"disable":r.registry.dndOptions.DisableDND=n;break;case"hideSelectionBackground":r.registry.dndOptions.DisableSelectionHalo=n;break;case"icon":r.registry.dndOptions.CustomDndIcon=n;break;case"className":r.registry.dndOptions.ContainerClassName=n;break;case"droppableContainer":r.registry.dndOptions.getDroppableContainer=n;break;case"disableColumnLayout":r.registry.dndOptions.DisableGridDnd=n}})))}})),new i(r)}},function(t){t.exports=JSON.parse('{"name":"contentstack-app-framework-sdk","version":"1.0.0","types":"dist/src/index.d.ts","description":"This SDK helps connect to the development server of the Contentstack and sync the data.","main":"dist/index.js","scripts":{"build":"webpack","test":"echo \\"Error: no test specified\\" && exit 1","dev":"webpack --watch --mode development"},"keywords":[],"author":"Deepak Kharah","license":"MIT","devDependencies":{"@babel/core":"^7.2.2","@babel/preset-env":"^7.3.1","@types/post-robot":"^10.0.3","@types/react":"^17.0.18","babel-loader":"^8.0.5","css-loader":"^5.2.2","ts-loader":"^8.1.0","typescript":"^4.2.4","webpack":"^4.29.0","webpack-cli":"^3.2.1","webpack-dev-server":"^3.11.2"},"dependencies":{"post-robot":"8.0.29","wolfy87-eventemitter":"5.2.4"}}')}])}));
//# sourceMappingURL=index.js.map